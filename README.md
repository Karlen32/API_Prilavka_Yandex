# Проект Яндекс Прилавка (API)
Яндекс Прилавок - это сервис, который предоставляет предпринимателям и компаниям возможность создавать собственные
виртуальные магазины в онлайн-пространстве. Этот инструмент облегчает процесс создания и настройки интернет-магазинов, 
управления продажами и обработки заказов. Он также обеспечивает интеграцию с онлайн-платежами, 
что делает его полезным для развития электронной коммерции и совершения успешных онлайн-сделок.

![image](https://github.com/user-attachments/assets/cde3b4af-4b5f-4ada-a55c-83006374d03f)

<details>
  <summary>Задача</summary> 
  
**Работа с наборами:**

возможность добавлять продукты в набор — ручка POST /api/v1/kits/{id}/products.
Работа с курьерами: возможность проверить, есть ли доставка курьерской службой «Привезём быстро» и сколько она стоит. 
Ручка POST /fast-delivery/v3.1.1/calculate-delivery.xml

**Работа с корзиной:**

возможность получить список продуктов, которые добавили в корзину.  Ручка GET /api/v1/orders/id;
возможность добавлять продукты в корзину. Ручка PUT /api/v1/orders/:id;
возможность удалять корзину. Ручка DELETE/api/v1/orders/:id.

**Постановка задачи** 

1.Проанализируй требования к новой функциональности бэкенда Яндекс.Прилавка.
Изучи документацию к API в Apidoc.

2.Спроектируй тесты в виде чек-листа, чтобы покрыть функциональность, 
которую тебе передали на тестирование: она описана выше. Авторизацию проверять не нужно.

3.Протестируй API через Postman и заведи баг-репорты в YouTrack, если это понадобится.

4.Напиши отчёт о тестировании (*). Что ты можешь рассказать команде о статусе протестированной части продукта?
(*) — задача со звёздочкой — задание, которое можно не сдавать. Оно не повлияет на результат итогового проекта.
</details>

<details>
  <summary>Требования к бэкенду</summary> 
  
# Требования к бэкенду приложения

## Описание общей логики

**Авторизация и данные для заказа**

Пользователь может зарегистрироваться. Если пользователь не 
зарегистрировался, то форма заполнения: имя, e-mail, телефон, адрес, 
комментарий — появляется, когда пользователь уже сформировал корзину и хочет 
оформить заказ. Пользователь не может сделать заказ, если не ввёл 
обязательные поля. Если пользователь зарегистрировался, то ему не нужно вновь 
вводить данные, однако он может их изменить. Пользователь может оформить 
несколько заказов.

 Для заказа нужно ввести:
- имя;
- телефон;
- адрес;
- e-mail (необязательно);
- комментарий к заказу (необязательно)

**Ограничение полей**
![image](https://github.com/user-attachments/assets/d6ef9a98-a1d9-4fa0-8b77-e8df4aff4c5e)

## Главное меню заказа
 На выбор даётся 3 карточки:
 - «Под ситуацию» (вечер кино, на дачу и пикник, вкусы Парижа);
 - «Приготовь блюдо» (сырники, борщ, карбонара, штрудель);
 - «Создать свой набор» (пользователь сам называет и добавляет туда 
   продукты).
 Переходишь в карточку — видишь варианты наборов. 
Переходишь в набор — видишь перечень возможных продуктов. Каждый продукт 
относится к определённой категории (например, «Напитки»). В перечне 
пользователь видит название продукта, его массу, цену. Когда клиент нажимает на 
продукт, ему даётся возможность выбрать количество продуктов. При этом 
появляется кнопка «Корзина», которая отображает сумму выбранных товаров и 
время доставки.
 При нажатии на кнопку пользователь может посмотреть свою корзину.

## Корзина

 Отображает наименование продукта, его количество, цену для этого продукта с 
учётом количества, итог. Если доставка платная, то отображает сумму доставки и 
итоговую сумму заказа. Пользователь может удалить корзину, добавить новые 
продукты, убрать выбранные продукты.

**Создание корзины:** 

 - При создании корзины должна быть возможность указать время доставки 
   продуктов
 - При создании корзины проверять, что все службы доставки могут обработать 
   заказ в указанное время
 - Если время доставки не указано - брать, как текущее время с сервера.
При удалении и просмотре корзины время доставки не учитывается.

## Создание своего набора

 Пользователь может создать свой набор и выбрать продукты. Он обязательно 
даёт имя набору и выбирает продукты. Пользователь может изменить название 
набора, удалить набор, удалить выбранные продукты, добавить новые. Если 
данные при создании или изменении набора введены неверно — выводится 
сообщение об ошибке.

## Ограничения создания набора
![image](https://github.com/user-attachments/assets/d5bc7d53-704b-476f-9250-07e32052d347)

## Работа с курьерами
 Работа с курьерами предполагает два режима работы:
 1. При оформлении заказа: URL 
 POST /api/v1/orders
 Логика выбора курьерской службы при оформлении заказа пользователем: служба 
должна работать в указанное в заказе время и должна быть самой дешёвой. 
Пользователю отображается время доставки в зависимости от выбранной службы.
 В заказе доставка становится платной, если соблюдается хотя бы одно условие:

- превышено максимальное количество товаров;
- превышен максимальный вес;
- сумма заказа меньше 150 рублей.
- 
Логика расчёта стоимости доставки заказа для пользователя:
- Если вес или количество превысили максимальное значение, стоимость 
доставки для пользователя становится 99 рублей.
- Если вес или количество в заказе не превышают максимального, берётся 
 price этих продуктов, и если их сумма меньше 150 рублей, то стоимость 
доставки для пользователя также становится 99 рублей.
 Стоимость доставки прибавляется в итоговую сумму заказа.
 Если ни одно из обозначенных условий не соблюдается, то цена доставки 
 курьерской службы не включается в итоговую сумму заказа.


2. Узнать возможность доставки продуктов и цену для отдельной курьерской 
службы: у каждой курьерской службы свой URL. 
Цена доставки курьерской службой рассчитывается по количеству и весу 
указанных продуктов.
<details>
  <summary>**Детальные требования к расчёту стоимости доставки курьерскими службами можно посмотретьтут**</summary>

# Требования к расчёту доставки курьерскими службами


У каждой курьерской службы есть своя ручка.
 Запрос на URL службы доставки возвращает следующие параметры:

  "name": Название сервиса 
"isItPossibleToDeliver": Возможно ли доставить (true/false) 
"hostDeliveryCost": Стоимость доставки для нас 
"toBeDeliveredTime": Ограничения доставки по времени 
"clientDeliveryCost": Стоимость доставки для клиента


- name — всегда одинаковое при обращении к одной и той же службе 
доставки. Значения берутся из таблицы с параметрами в требованиях.

- toBeDeliveredTime — диапазон времени, за которое служба выполнит 
доставку. Всегда одинаковое при обращении к одной и той же службе 
доставки. Значения параметров приведены в таблице в требованиях.

- В самом запросе deliveryTime — время, к которому пользователь ожидает
доставку; в часах.

- isItPossibleToDeliver — true , когда время deliveryTime попадает в 
диапазон работы курьерской службы, если не попадает — false .

- hostDeliveryCost — стоимость внутренней доставки рассчитывается в 
соответствии с таблицей.

![image](https://github.com/user-attachments/assets/cf2b2456-525a-4b5c-81e7-08568b80062c)

Вычисление зависит от передаваемых переменных productsCount 
(количество продуктов) и productsWeight (вес продуктов). 

Например, для службы доставки «Доставка Москва»:
- ЕСЛИ productsCount меньше или равно 10 шт.
  
- И productsWeight меньше или равно 3 кг
  
- ТО hostDeliveryCost будет равен 25

- Во всех остальных случаях hostDeliveryCost будет равен 45 .

 - clientDeliveryCost — стоимость доставки клиенту рассчитывается в 
соответствии с таблицей. 
Вычисление зависит от передаваемых переменных productsCount 
(количество продуктов) и productsWeight (вес продуктов).

 Стоимость доставки клиенту может быть равна 0 и 99.
 
 Стоимость доставки будет 99, если соблюдается хотя бы одно из 
 условий:
- превышено максимальное количество товаров;
- превышен максимальный вес.
- 
Например, для службы доставки «Доставка Москва»:

- ЕСЛИ productsWeight больше 7 кг (максимальное значение по таблице)

- ИЛИ productsCount больше 15 шт. (максимальное значение по таблице)
  
- ТО clientDeliveryCost будет равна 99

- Во всех остальных случаях clientDeliveryCost будет равен 0.
   
- Условие «Сумма заказа меньше 150 рублей» в курьерской ручке не 
  накладывается. Это условие используется в ручке заказа продуктов.
</details>

## Ограничения Couriers
![image](https://github.com/user-attachments/assets/5c7e8244-e87c-4efd-b41f-420e6803a080)

## Работа со складом
 Имеется 4 складских отделения. У каждого склада своя ручка. У каждого свой 
ограниченный набор продуктов. Когда пользователь сделал заказ, ручка уточняет, 
какой склад сформирует заказ. Логика выбора склада: есть продукты на складе, 
должен работать во время заказа и самый дешёвый. Пользователь может заказать 
только те продукты и их количество, которые есть в полной мере хотя бы на одном
складе (то есть ситуации, где он набрал корзину, а ему пишут «Не привезём» — 
нет)

## Ограничения Warehouse

![image](https://github.com/user-attachments/assets/c884c607-9197-466b-ba66-8e7e99024f44)

 # Список URL реализованных в API
 
 Подробнее о самих URL и параметрах смотри в документации к API
 
 ## URL для авторизации
 - POST /api/v1/users - создать пользователя
 ## URL для наборов
 - POST /api/v1/kits - создать набор
 - GET /api/v1/kits - получить список наборов
 - DELETE /api/v1/kits - удалить набор
 - PUT /api/v1/kits - переименовать набор, изменить список продуктов в наборе
 - GET /api/v1/kits/search - получить список продуктов в наборе
 ## URL для продуктов
 - POST /api/v1/products/kits - получить список наборов по продуктам
 - POST /api/v1/kits/{id}/products - добавить продукты в набор
 - PUT /api/v1/products/:id - изменить цену продукта
 - POST /api/v1/orders - посчитать сумму продуктов
 - POST /api/v1/warehouse/check - проверить наличие продуктов на складах
## URL для складов
 - GET /api/v1/warehouses - получить список складов
 - POST /api/v1/warehouses/amount - получить информацию о количестве продуктов на складах
 - /api/wsdl - получить информацию о количестве продуктов на складах
 - POST /api/v1/orders - получить информацию, какой склад возьмет заказ
## URL для курьерских служб
 - GET /api/v1/couriers - получить список курьерских служб
 - POST /api/v1/couriers/check - узнать информацию доступна ли курьерская служба для 
## доставки заказа
 - POST /api/v1/orders - узнать информацию, какой курьер возьмет заказ
 - POST /moscow-delivery/v1/calculate - возможность доставки и её стоимость курьерской 
## «Доставка Москва»
 - POST /on-a-broomstick/v1/delivery - возможность доставки и её стоимость курьерской 
## службой «На метле уюта»
 - POST /fast-delivery/v3.1.1/calculate-delivery.xml - возможность доставки и её стоимость 
## курьерской службой «Привезём быстро»
 - POST /train-noises/wsdl - возможность доставки и её стоимость курьерской службой «Чух-чух 
   и уже у вас»
## URL для заказов
 - POST /api/v1/orders - посчитать итоговую сумму заказа (вместе с доставкой)
 - POST /api/v1/orders - посчитать стоимость доставки с учётом различных курьерских служб
 - GET /api/v1/orders - получить список заказов
 - URL для корзины
 - GET /api/v1/orders/id - получить список продуктов в корзине
 - POST /api/v1/orders - создать корзину
 - PUT /api/v1/orders/:id - добавить продукты в корзину
 - DELETE/api/v1/orders/:id - удалить корзину

 ## Описание содержимого базы данных 
 ![image](https://github.com/user-attachments/assets/d6d9eeb0-2536-4fe7-a202-2d63d92b7748)

### Таблица "user_model"
![image](https://github.com/user-attachments/assets/1508ece7-d1f8-4b39-9af9-a371ce4c2074)


### Таблица "order_model"
![image](https://github.com/user-attachments/assets/86dfbbc7-2689-4100-9404-2acd27f7b92e)

### Таблица "kit_model"
![image](https://github.com/user-attachments/assets/abe1b1fb-35ef-4a10-bea5-e403757bb693)

### Таблица "product_model"
![image](https://github.com/user-attachments/assets/99b8eab5-0e40-4732-babd-2b8ffac1113e)

### Таблица "card_model"
![image](https://github.com/user-attachments/assets/575bae1d-6444-4d36-a1df-7aa2716abf58)

### Таблица "category_model"
![image](https://github.com/user-attachments/assets/fdf385e1-f82d-4185-9137-d37d1cce1611)

</details>





 

   







  



  


  
  
